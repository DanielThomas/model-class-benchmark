# Benchmarking JVM model classes

This is a quick study of the relative performance of the typical DTO methods generated by:

* Groovy 2.4.3 annotations
* Scala 2.11.6 case classes
* Kotlin 0.11.91.1 data classes
* Lombok annotation generated
* Eclipse and IntelliJ auto-generated

Running on Oracle Java 8u40. These tests use the Groovy indy jar and compile flag (compile static is not enabled as @melix mentioned certain optimizations are disabled in that case, but static compile definitely performs better - figure I'll keep the default case here).

I'm impatient, so each benchmark is running with 15 warmups, 30 iterations, and 1 fork.  The benchmark is sampling for average time in nanoseconds.

To run locally, _./gradlew jmh_ (it should take about 30 minutes and the results will be in ./build/reports/jmh/human.txt)

## equals()

Equals against the same model instance:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsIdentity   intellij  avgt   30     3.840 ±  0.035  ns/op
    ModelBenchmark.equalsIdentity    eclipse  avgt   30     2.774 ±  0.112  ns/op
    ModelBenchmark.equalsIdentity     groovy  avgt   30     7.619 ±  0.049  ns/op
    ModelBenchmark.equalsIdentity     lombok  avgt   30     3.912 ±  0.056  ns/op
    ModelBenchmark.equalsIdentity      scala  avgt   30     2.372 ±  0.053  ns/op
    ModelBenchmark.equalsIdentity     kotlin  avgt   30     2.363 ±  0.046  ns/op

Equals null:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsNull       intellij  avgt   30     3.944 ±  0.134  ns/op
    ModelBenchmark.equalsNull        eclipse  avgt   30     2.448 ±  0.096  ns/op
    ModelBenchmark.equalsNull         groovy  avgt   30     3.778 ±  0.196  ns/op
    ModelBenchmark.equalsNull         lombok  avgt   30     4.121 ±  0.397  ns/op
    ModelBenchmark.equalsNull          scala  avgt   30     2.409 ±  0.115  ns/op
    ModelBenchmark.equalsNull         kotlin  avgt   30     2.526 ±  0.152  ns/op

Equals against an instance with a different type:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsOtherType  intellij  avgt   30     4.305 ±  0.132  ns/op
    ModelBenchmark.equalsOtherType   eclipse  avgt   30     3.290 ±  0.060  ns/op
    ModelBenchmark.equalsOtherType    groovy  avgt   30     6.831 ±  0.066  ns/op
    ModelBenchmark.equalsOtherType    lombok  avgt   30     4.474 ±  0.119  ns/op
    ModelBenchmark.equalsOtherType     scala  avgt   30     3.387 ±  0.191  ns/op
    ModelBenchmark.equalsOtherType    kotlin  avgt   30     3.345 ±  0.075  ns/op

Equals against an equal, but different instance:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsWorstCase  intellij  avgt   30    23.770 ±  0.643  ns/op
    ModelBenchmark.equalsWorstCase   eclipse  avgt   30    23.553 ±  0.536  ns/op
    ModelBenchmark.equalsWorstCase    groovy  avgt   30   284.429 ± 21.491  ns/op
    ModelBenchmark.equalsWorstCase    lombok  avgt   30    25.150 ±  2.371  ns/op
    ModelBenchmark.equalsWorstCase     scala  avgt   30    24.444 ±  0.749  ns/op
    ModelBenchmark.equalsWorstCase    kotlin  avgt   30    25.890 ±  0.732  ns/op

**Note:** Groovy 2.3.9 scored over 1000 ns/op on `equals()` with a similar error margin as below.

## hashCode()

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.hashCode         intellij  avgt   30    25.446 ±  1.224  ns/op
    ModelBenchmark.hashCode          eclipse  avgt   30    25.249 ±  1.013  ns/op
    ModelBenchmark.hashCode           groovy  avgt   30   640.330 ± 22.228  ns/op
    ModelBenchmark.hashCode           lombok  avgt   30    23.940 ±  0.420  ns/op
    ModelBenchmark.hashCode            scala  avgt   30    42.798 ±  0.364  ns/op
    ModelBenchmark.hashCode           kotlin  avgt   30    24.814 ±  0.463  ns/op

## toString()

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.toString         intellij  avgt   30   445.597 ± 98.159  ns/op
    ModelBenchmark.toString          eclipse  avgt   30   342.488 ±  8.955  ns/op
    ModelBenchmark.toString           groovy  avgt   30  2231.840 ± 18.327  ns/op
    ModelBenchmark.toString           lombok  avgt   30   361.494 ± 11.075  ns/op
    ModelBenchmark.toString            scala  avgt   30   657.295 ± 83.485  ns/op
    ModelBenchmark.toString           kotlin  avgt   30   341.618 ± 12.195  ns/op
