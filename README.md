# Benchmarking JVM model classes

This is a quick study of the relative performance of the typical DTO methods generated by Groovy 2.4.3 annotations, Scala 2.11.6 case classes, Kotlin 0.11.91.1 data classes, and Lombok, all running on Oracle Java 8u40.  These tests use the Groovy indy jar and compile flag.  The Groovy model object is decorated with `@CompileStatic`.

I'm impatient, so each benchmark is running with 20 warmups, 50 iterations, and 1 fork.  The benchmark is sampling for average time in nanoseconds.

To run locally, _./gradlew jmh_ (it should take about 30 minutes and the results will be in ./build/reports/jmh/human.txt)

## equals()

Equals against the same model instance:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsIdentity   intellij  avgt   50     3.657 ±  0.068  ns/op
    ModelBenchmark.equalsIdentity    eclipse  avgt   50     2.200 ±  0.041  ns/op
    ModelBenchmark.equalsIdentity     groovy  avgt   50     3.784 ±  0.078  ns/op
    ModelBenchmark.equalsIdentity     lombok  avgt   50     3.668 ±  0.096  ns/op
    ModelBenchmark.equalsIdentity      scala  avgt   50     2.207 ±  0.036  ns/op
    ModelBenchmark.equalsIdentity     kotlin  avgt   50     2.248 ±  0.055  ns/op

Equals null:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsNull       intellij  avgt   50     3.651 ±  0.060  ns/op
    ModelBenchmark.equalsNull        eclipse  avgt   50     2.295 ±  0.041  ns/op
    ModelBenchmark.equalsNull         groovy  avgt   50     3.654 ±  0.068  ns/op
    ModelBenchmark.equalsNull         lombok  avgt   50     3.952 ±  0.078  ns/op
    ModelBenchmark.equalsNull          scala  avgt   50     3.855 ±  0.083  ns/op
    ModelBenchmark.equalsNull         kotlin  avgt   50     2.147 ±  0.043  ns/op

Equals against an equal, but different instance:

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.equalsWorstCase  intellij  avgt   50    37.674 ±  0.716  ns/op
    ModelBenchmark.equalsWorstCase   eclipse  avgt   50    37.748 ±  0.500  ns/op
    ModelBenchmark.equalsWorstCase    groovy  avgt   50    54.944 ±  0.807  ns/op
    ModelBenchmark.equalsWorstCase    lombok  avgt   50    36.983 ±  0.526  ns/op
    ModelBenchmark.equalsWorstCase     scala  avgt   50    38.614 ±  0.598  ns/op
    ModelBenchmark.equalsWorstCase    kotlin  avgt   50    58.159 ±  0.702  ns/op

**Note:** Groovy 2.3.9 scored over 1000 ns/op on `equals()` with a similar error margin as below.

## hashCode()

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.hashCode         intellij  avgt   50    35.226 ±  0.534  ns/op
    ModelBenchmark.hashCode          eclipse  avgt   50    35.788 ±  0.759  ns/op
    ModelBenchmark.hashCode           groovy  avgt   50   487.292 ±  8.966  ns/op
    ModelBenchmark.hashCode           lombok  avgt   50    42.833 ±  0.590  ns/op
    ModelBenchmark.hashCode            scala  avgt   50    60.446 ±  0.921  ns/op
    ModelBenchmark.hashCode           kotlin  avgt   50    45.339 ±  0.809  ns/op

## toString()

    Benchmark                        (model)  Mode  Cnt     Score    Error  Units
    ModelBenchmark.toString         intellij  avgt   50   390.184 ± 10.019  ns/op
    ModelBenchmark.toString          eclipse  avgt   50   375.839 ±  5.093  ns/op
    ModelBenchmark.toString           groovy  avgt   50  2064.575 ± 28.146  ns/op
    ModelBenchmark.toString           lombok  avgt   50   378.878 ±  7.978  ns/op
    ModelBenchmark.toString            scala  avgt   50   816.481 ± 38.111  ns/op
    ModelBenchmark.toString           kotlin  avgt   50   352.479 ±  9.896  ns/op
